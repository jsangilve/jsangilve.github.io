<!DOCTYPE html>
<html lang="en">
  <head>
            <title>HATE THAT CODE</title>
          <meta charset="utf-8" />
          <!-- Mobile Specific Metas
          –––––––––––––––––––––––––––––––––––––––––––––––––– -->
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <!-- Roboto -->
          <link href='https://fonts.googleapis.com/css?family=Roboto:400,300' rel='stylesheet' type='text/css'>
          <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300' rel='stylesheet' type='text/css'>
          <!--Skeleton CSS
          –––––––––––––––––––––––––––––––––––––––––––––––––– -->
          <link rel="stylesheet" href="/theme/css/pure-min.css">
          <!--Custom CSS-->
          <link rel="stylesheet" href="/theme/css/custom.css">
          <link rel="stylesheet" href="/theme/css/pygment.css">
          <!-- Favicon
          –––––––––––––––––––––––––––––––––––––––––––––––––– -->
          <link rel="icon" type="image/png" href="/theme/images/favicon.png" />




    <meta name="tags" contents="vim" />
    <meta name="tags" contents="javascript" />
    <meta name="tags" contents="prettier" />
    <meta name="tags" contents="eslint" />

  </head>
  <body id="index" class="home">
            <div class="container pure-g">
                  <div class="pure-u-1 pure-u-sm-1-12">
                  <header id="banner" class="blog-title">
                    <h1><img src="/theme/images/angry_logo_75.png" /><a href="/">HATE THAT CODE</a></h1>
                      <h2>by josé san gil</h2>
                  </header><!-- /#banner -->
                  <nav id="menu">
                    <ul>
                    </ul>
                  </nav><!-- /#menu -->
<section id="content" class="body article">
  <header>
    <abbr class="published" title="2017-07-06T00:00:00+02:00"> Thu 06 July 2017 </abbr>
    <h2 class="entry-title">
      <a href="/when-prettier-eslint-and-vim-dont-work-as-expected.html" rel="bookmark"
         title="Permalink to When prettier-eslint and Vim don't work as expected">When prettier-eslint and Vim don't work as expected</a></h2>
 
  </header>
  <footer class="post-info">
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>I think almost everybody agrees that Prettier (Javascript formatter) is a fantastic tool and using it along with Vim is simple. </p>
<p>There are a couple of Vim plugins for prettier that seem to work well. However, I like to keep Vim as light/fast as possible, so I chose <a href="https://github.com/prettier/prettier-eslint-cli">prettier-eslint-cli</a> which doesn't require to install a plugin, but add a couple of lines to your Vim's config file (it also combines with <a href="https://github.com/prettier/prettier-eslint">eslint rules</a>).</p>
<p>So, I added the following two lines to my <code>.vimrc</code> after installing prettier-eslint-cli via yarn, and... it didn't work (because computers...).</p>
<div class="highlight"><pre><span></span><code><span class="err"> &quot; Prettier-eslint Javascript formatter</span>
<span class="err"> autocmd FileType javascript set formatprg=prettier-eslint\ --stdin\ --no-semi\ --single-quote</span>
<span class="err"> autocmd BufWritePre *.js :normal gggqG</span>
</code></pre></div>


<p>The first line sets <code>formatprg</code> (format program) to <code>prettier-eslint</code>, i.e., use prettier-eslint as text formatter when the filetype is javascript.  I double checked that <code>formatprg</code> was properly set when a Javascript file was open, but it didn't work. After reading different blog posts, I found this in <code>formatprg</code> docs (<code>help formatprg</code>)</p>
<div class="highlight"><pre><span></span><code><span class="err"> If the &#39;formatexpr&#39; option is not empty, it will be used instead.</span>
<span class="err"> Otherwise, if &#39;formatprg&#39; option is an empty string, the internal</span>
<span class="err"> format function will be used |C-indenting|.</span>
</code></pre></div>


<p>My <code>formatexpr</code> wasn't empty because I had vim-es6 plugin installed (syntax highlighting for ES6+). This plugin set's <code>formatexpr</code> for indentation; <strong>I removed vim-es6 and prettier-eslint-cli started to work correctly</strong>.</p>
  </div><!-- /.entry-content -->
</section>
                  <!-- /#contentinfo -->
                  </div>
            </div>

            <footer id="contentinfo">
              <div class="container">
                <span>José San Gil / <a href="https://twitter.com/jsangilve">@jsangilve</a></a><span class="credit">logo by AVA ROWELL from the Noun Project</span>
              </div>
            </footer>
            <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-11146701-2', 'auto');
              ga('send', 'pageview');
            </script>
  </body>
</html>